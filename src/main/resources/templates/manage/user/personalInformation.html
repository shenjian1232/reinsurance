<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
      xmlns:shiro="http://www.pollix.at/thymeleaf/shiro">
<head th:replace="/fragments/commonHeader :: head"></head>
<body>
<!-- Main content -->
<section class="content">
    <div class="row">
        <div class="col-xs-12">
            <form>
                <table class="table table-bordered table-striped">
                    <tbody>
                    <tr>
                        <td width="200px" class="text-right">账号</td>
                        <input type="hidden" name="id" id="id"
                               th:value="*{model.id}"/>
                        <td th:text="*{model.loginName}"></td>
                    </tr>
                    <tr>
                        <td width="200px" class="text-right">归属机构</td>
                        <td th:text="*{model.officeName}"></td>
                    </tr>
                    <tr>
                        <td class="text-right">真实姓名</td>
                        <td><input type="text" style="width:300px" placeholder="如若修改请填写"
                                   name="username" th:value="*{model.name}"/></td>
                    </tr>
                    <tr>
                        <td class="text-right">手机</td>
                        <td><input type="text" style="width:300px" placeholder="如若修改请填写"
                                   name="mobile" th:value="*{model.mobile}"/></td>
                    </tr>
                    <tr>
                        <td class="text-right">邮箱</td>
                        <td><input type="text" style="width:300px" placeholder="如若修改请填写"
                                   name="email" th:value="*{model.email}"/></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td class="text-left">
                            <button type="submit" class="btn btn-primary">保存</button>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </form>
        </div>
    </div>
</section>
<script th:src="@{/js/jquery-2.1.4.min.js }" type="text/javascript"></script>
<script th:src="@{/adminlte/bootstrap/js/bootstrap.min.js}" type="text/javascript"></script>
<script th:src="@{/layer/layer.js}" type="text/javascript"></script>
<script type="text/javascript">
    $(function () {
        $("form").submit(function (e) {
            e.preventDefault();
            $.post("updateUsernameAndEmail", $('form').serialize(), function (a, b) {
                if (a == true) {
                    layer.open({
                        title: 'notice',
                        content: '保存成功',
                        end: function () {
                            window.location.href = localStorage.getItem("adminPath") + "/manage/user/personalInformation";
                        }
                    });
                } else {
                    layer.alert(a.msg);
                    return false;
                }
            });
            return false;
        });
    });
</script>
</body>
</html>